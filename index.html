<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.15.1/dist/phaser-arcade-physics.min.js"></script>
</head>
<body>

    <script>
    var config = {
        type: Phaser.AUTO,
        width: 800,
        height: 600,
        physics: {
            default: 'arcade',
            arcade: {
                gravity: { y: 300 }
            }
        },
        scene: {
            preload: preload,
            create: create,
            update: update
        }
    };

    var game = new Phaser.Game(config);
    var cells = [];
    var numRows = 9;
    var numCols = 9;

    function preload ()
    {
        this.load.setBaseURL('https://raw.githubusercontent.com');
        this.load.atlas('atlas',
                        'karstendick/minej/master/assets/minesweeper-atlas.png',
                        'karstendick/minej/master/assets/minesweeper-atlas.json')
    }

    function cellPointerDown(pointer)
    {
        console.log("pointerdown event at (", this.getData('row'), ", ", this.getData('col'), ")");
        this.setFrame('cell-empty')
    }

    function create ()
    {
        for(var r = 0; r < numRows; ++r)
        {
            cells[r] = [];
            for(var c = 0; c < numCols; ++c)
            {
                var pxx = c * 16;
                var pxy = r * 16;
                var cell = this.add.image(pxx, pxy, 'atlas', 'cell-raised').setOrigin(0);

                cell.setData('row', r);
                cell.setData('col', c);
                cell.setData('numNeighbors', c+1);
                cell.setData('isMine', (c === 8));

                cell.setInteractive();
                cell.on('pointerdown', cellPointerDown);

                cells[r][c] = cell;
            }
        }
    }

    function update ()
    {
        
    }


    </script>

</body>
</html>